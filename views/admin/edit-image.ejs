<% include ./partials/header  %>
<% include ./partials/navigation %>
<% include ./partials/sidebar %>
    <main class="admin">
        <h1 class="page-title">Edit Image</h1>

        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12 col-md-6 col-lg-6">
                    <div class="panel">
                        <div class="panel__header">
                            Image being edited
                        </div>
                        <div class="panel__body">
                            <img src="<%= imageData[0].src %>" alt="<%= imageData.image_desc %>" class="img-thumbnail">
                        </div><!-- end .panel__body -->
                    </div><!-- end .panel -->
                </div><!-- end .col-lg-6 -->
                <div class="col-xs-12 col-md-6 col-lg-6">
                    <div class="panel">
                        <div class="panel__header">
                            Edit Image Data
                        </div>
                        <div class="panel__body">
                            <form action="/admin/images/<%= imageData[0].image_id %>?_method=PUT" method="POST" enctype="application/x-www-form-urlencoded">
                                <input type="hidden" name="image[id]" value="<%= imageData[0].image_id %>">
                                <input type="hidden" value="<%= imageData[0].album_id %>">
                                <div class="form-group">
                                    <label for="image[title]" class="form-label">Image Title</label>
                                    <input type="text" name="image[title]" class="form-control" value="<%= imageData[0].image_title %>" required="required">
                                </div>
                                <div class="form-group">
                                    <label for="image[description]" class="form-label">Image Description</label>
                                    <textarea name="image[description]" class="form-control form-control--textarea" required="required"><%= imageData[0].image_desc %></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="image[album]" class="form-label">Album</label>
                                    <select name="image[album]" class="form-control" required="required">
                                        <% albumData.forEach( (album) => {  
                                            if (album.id === imageData[0].album_id){ %>
                                                <option value="<%= album.id %>" selected><%= album.title %></option>
                                        <% 
                                            } else { %>
                                                <option value="<%= album.id %>"><%= album.title %></option>
                                            <%
                                            }
                                        }); %>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <button class="btn btn--black">Update Image</button>
                                    <button class="btn btn-danger">Delete Image</button>
                                </div>
                            </form>
                        </div><!-- end .panel__body -->
                    </div><!-- end .panel -->
                </div><!-- end .col-lg-6 -->
            </div><!-- end .row -->
        </div><!-- end .container-fluid -->
    </main>
<% include ./partials/footer  %>